!function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var o={};e.m=t,e.c=o,e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.traceUid=e.JPIPE_URL=e.GPIPE_URL=e.PIPE_URL=e.COUNTER_URL=e.isDebug=e.isDeveloper=e.args=e.ua=e.$rags=e.$ragsContainer=e.isEditor=void 0;var n=o(1),i=e.isEditor=/output_tpl/.test(location.href)||/support/.test(location.href)||/preview\.html/.test(location.href),r=(e.$ragsContainer=$("#rags-container"),e.$rags=$("#rags-container .rag"),e.ua=(0,n.UATest)(window.navigator.userAgent),e.args=(0,n.parseURL)(location.href).params),a=(e.isDeveloper=r.youpinDeveloper||window.youpinDeveloper||i,e.isDebug=Boolean(location.host.match(/^test/)),e.COUNTER_URL="//home.mi.com/app/shop/counter",void 0),s=void 0,c=void 0;location.host.match(/home\.mi\.com$/)?(e.PIPE_URL=a="//"+location.host+"/app/shop/pipe",e.GPIPE_URL=s="//"+location.host+"/app/shopv3/pipe",e.JPIPE_URL=c="//"+location.host+"/app/shop/jpipe"):(e.PIPE_URL=a="//home.mi.com/app/shop/pipe",e.GPIPE_URL=s="//home.mi.com/app/shopv3/pipe",e.JPIPE_URL=c="//home.mi.com/app/shop/jpipe");var u=void 0;"shopapi.io.mi.com"===location.host&&r.followup&&location.replace(decodeURIComponent(r.followup)),function(){(0,n.localStorageGet)("mihome-trace-uid",function(t){e.traceUid=u=t},function(){e.traceUid=u="unsupported"}),u||(e.traceUid=u=function(){return(""+Date.now()+Math.random()).replace(/0\./,"-")}(),(0,n.localStorageSet)("mihome-trace-uid",u))}(),e.PIPE_URL=a,e.GPIPE_URL=s,e.JPIPE_URL=c,e.traceUid=u},function(t,e,o){"use strict";function n(t,e,o){try{var n=localStorage.getItem(t);return e&&e(n),n}catch(t){o&&o(),console.warn("browser doesn't support localStorage")}}function i(t,e,o,n){try{localStorage.setItem(t,e),o&&o()}catch(t){n&&n(),console.warn("browser doesn't support localStorage")}}function r(t){var e=document.createElement("a");return e.href=t,{source:t,protocol:e.protocol.replace(":",""),host:e.hostname,port:e.port,query:e.search,params:function(){for(var t={},o=e.search.replace(/^\?/,"").split("&"),n=o.length,i=0,r=void 0;i<n;i++)o[i]&&(r=o[i].split("="),t[r[0]]=r.slice(1).join("="));return t}(),file:(e.pathname.match(/\/([^\/?#]+)$/i)||["",""])[1],hash:e.hash.replace("#",""),path:e.pathname.replace(/^([^\/])/,"/$1"),relative:(e.href.match(/tps?:\/\/[^\/]+(.+)/)||["",""])[1],segments:e.pathname.replace(/^\//,"").split("/")}}function a(t){var e=t.match(/MiHome/)&&t.match(/iOS/)||t.match(/^iOS-/)||t.match(/MIOTStore/)&&t.match(/;I/);e=Boolean(e);var o=t.match(/^Android-/)||t.match(/MIOTStore/)||t.match(/com\.xiaomi\.smarthome/);o=Boolean(o);var n=Boolean(t.match(/Android/)),i=Boolean(t.match(/(iPad|iPhone|iPod)\s+OS\s([\d_.]+)/)),r=Boolean(t.match(/MicroMessenger/i)),a=r,s=Boolean(t.match(/UCBrowser/)),c=!n&&!i,u=o||e;return{iOS_app:e,android_app:o,app:u,android:n,iOS:i,weixin:r,wechat:a,uc:s,pc:c,youpin:u&&Boolean(t.match(/YouPin/)),mijia:u&&Boolean(t.match(/SmartHome/)),"H60-L01":Boolean(t.match(/H60-L01/))}}Object.defineProperty(e,"__esModule",{value:!0}),e.localStorageGet=n,e.localStorageSet=i,e.parseURL=r,e.UATest=a},function(t,e,o){"use strict";function n(t){S[t]||(S[t]=!0,P.isDeveloper&&console.warn(t))}function i(t){return t.description&&t.description.match(/[\u4e00-\u9fa5]/)?t.description:t.message&&t.message.match(/[\u4e00-\u9fa5]/)?t.message:t.message||t.description}function r(){P.ua.weixin||$("iframe:not(.editor-used)").remove(),$("[src='http://ta.ifeng.com/css/_ta_qaz_main.css']").remove(),$("#dynamic-style").remove()}function a(t,e){t=t.split(".");var o=parseInt(t[0]),n=void 0;n=t[1]?2===t[1].length?t[1]/1:10*t[1]:0;var i=void 0;"yuan"===e?i=100*o+n:"cent"===e?i=o:console.error("formatMoney's unit can only be yuan or cent");var r=""+parseInt(i/100),a=i%100;return a=a<10?"0"+a:""+a,{int:r,dot:a}}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cent",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"￥";t+="";var n={},i=a(t,e);return n.dot=i.dot,n.int=i.int,n.raw=t,n.fix=""+o+n.int+"."+n.dot,"00"!==n.dot?n.short=n.int+"."+n.dot.replace(/0$/,""):n.short=n.int,n}function c(){var t=location.protocol+"//home.mi.com/app/shop/login?followup="+encodeURIComponent(location.href);P.ua.iOS_app&&(t="//home.mi.com/app/shop/login?followup="+encodeURIComponent(t)),location.replace(t)}function u(t){var e="网络错误";if(void 0!==t.description){if(2000001===t.code)return c(),!1;e=t.description,toast(e)}else void 0!==t.message?(e=t.message,toast(e)):toast(e);return!1}function l(t,e,o,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||location.origin+"/app/shop/pipe",$.ajax({type:"POST",url:n,data:{data:JSON.stringify(t)},dataType:"json",timeout:3e4,success:function(r){if(r.code)o?o(r):u(r);else if(r.result){for(var a in r.result){var s=r.result[a];if(-24===s.code||s.data&&s.data.code&&2000001===s.data.code)return void(i||c());if(4000001===s.code)return toast("请先绑定手机号"),void setTimeout(function(){var t="https://account.xiaomi.com/pass/auth/security/home";P.args.source&&(t+="?source="+P.args.source),window.location.href=t},1e3);if(4000002===s.code)return void(0,O.captcha)(function(){l(t,e,o,n,i)},s.data)}e(r.result,r)}else u(r)},error:function(t){function e(){0===t.status?toast("网络连接超时, 请重试"):toast("网络错误"+t.status+", 请重试")}if(401===t.status&&!i)return void c();o?o(t)||e():e()}})}function d(t,e){return new Promise(function(o,n){l({check:{model:"User",action:"InWhite",parameters:{}}},function(e){t&&t(e.check.data),o(e.check.data)},function(t){e&&e(t),n(t)},"/app/shop/gpipe")})}function p(){return new Promise(function(t,e){var o=void 0;l({get:{model:"User",action:"GetInfo",parameters:{}}},function(e){o=!0,t(o)},function(n){if(401===n.status)return o=!1,t(o),!0;e()},"/app/shop/gpipe",!0)})}function f(t){return t.is(".rag")?t:t.parents(".rag").eq(0)}function h(t,e,o){t=t.replace(new RegExp("[?&]"+e+"=[^&]*&?","g"),function(t){return"&"===t[t.length-1]?t[0]:""});var n=/#[\w-]+$/,i=t.match(n)||[];i=i[0]||"",t=t.replace(n,"");var r="&";return-1===t.indexOf("?")&&(r="?"),""+t+r+e+"="+o+i}function v(t){var e=void 0;return e=t.is(".rag,[data-link-index]")?t.data("editor-trace"):t.closest(".rag,[data-link-index]").data("editor-trace"),e=window.articleModeTraceName+"-"+window.articleId+"-"+e}function m(t){var e=t.url,o=t.$dom,n=t.traceAppend,i=void 0===n?[]:n,r=t.extraParams,a=void 0===r?{}:r,s=t.uid,c=void 0===s||s;if(P.args.source&&(e=h(e,"source",P.args.source)),c&&(e=h(e,"traceUid",P.traceUid)),o){o=$(o);var u=v(o);i.length&&(u+="-",u+=i.join("-")),e=h(e,"trace",u)}for(var l in a)e=h(e,l,a[l]);return e}function g(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(n("getTracedUrl is deprecated, use getTracedUrl2 instead"),P.args.source&&(t=h(t,"source",P.args.source)),t=h(t,"traceUid",P.traceUid),e){e=$(e);var r=v(e);r+=o,t=h(t,"trace",r)}for(var a in i)t=h(t,a,i[a]);return t}function y(t,e){var o=m({url:P.COUNTER_URL,$dom:e,extraParams:{event:t}});return $.get(o),o}function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.$dom,n=e.replace,i=e.open;t=m({url:t,$dom:o,traceAppend:e.traceAppend,uid:!1}),n?location.replace(t):i?window.open(t):location.href=t}function _(t){function e(t,e,o){var n=t.attr("href");n&&"#"!==n[0]&&(n=h(n,e,o),t.attr("href",n))}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{e(t,"trace",v(t)+o),P.args.source&&e(t,"source",P.args.source)}catch(t){console.warn(t)}}function b(){var t=$('<div class="editor-common-downloadheader">\n<div class="editor-ad-logo" style="position:relative;">\n    <div class="editor-adheader-close clickable">\n        <img src="//home.mi.com/shop/static/img/std_shop_details_icon_close_normal.png">\n    </div>\n    <div class="editor-ad-icon"></div>\n    <div class="editor-ad-title" style="margin-top: '+(P.ua.android?3:0)+'px;">\n        <h1>有品App</h1>\n        <p style="margin: '+(P.ua.iOS?-1:0)+'px;">买爆品 上有品</p>\n    </div>\n</div>\n<a class="editor-ad-download" href="//mijiayoupin.com/about" target="_blank" data-leave="true"></a>\n</div>');t.find(".editor-adheader-close").on("touchstart click",function(t){return t.preventDefault(),$(this).closest(".editor-common-downloadheader").remove(),!1}),navigator.userAgent.match(/XiaoMi\/MiuiBrowser/)&&navigator.userAgent.match(/Shop\/ios/)&&t.find("a.editor-ad-download").on("touchstart",function(t){t.preventDefault(),location.href=$(this).attr("href")}),$(".editor-app-ad,.rag[data-name='editor_app_ad']").html(t)}function T(t){$("<img />").attr("src",t)}function x(t){return h(t,"random",Math.random())}Object.defineProperty(e,"__esModule",{value:!0}),e.developerWarn=n,e.getChineseMessage=i,e.removeAd=r,e.priceSplit=a,e.formatMoney=s,e.jumptoLogin=c,e.doError=u,e.miFetch=l,e.inWhite=d,e.getLogin=p,e.getRag=f,e.addParam=h,e.getTraceFromDom=v,e.getTracedUrl2=m,e.getTracedUrl=g,e.countEvent=y,e.jumpTo=w,e.setTrace=_,e.addAd=b,e.preloadImage=T,e.randomUrl=x;var P=o(0),O=o(3),S={}},function(t,e,o){"use strict";function n(t){var e=$("body"),o=e.css("overflow"),n=e.css("pointer-events");t.css("pointer-events","all");var i=function(){return!1};return e.css("overflow","hidden").css("pointer-events","none").on("touchmove",i),function(){setTimeout(function(){e.css("overflow",o).css("pointer-events",n).off("touchmove",i)},d.ua.iOS?350:200)}}function i(t){var e=$("<div class='util-toast-wrapper'>\n    <div class='util-toast'>\n    "+t+"\n    </div>\n</div>"),o=$("#page-foot");o.length||(o=$(document.body)),o.append(e),setTimeout(function(){e.active()},100),setTimeout(function(){e.addClass("disabled"),setTimeout(function(){e.remove()},700)},2200)}function r(t){arguments.length>1&&(t={header:arguments[0],content:arguments[1],btns:arguments[2],cb:arguments[3]});var e=t,o=e.header,n=e.content,i=e.btns,r=e.cb,a=e.closeOnTap,s=void 0!==a&&a,u=e.tapShadowHide,d=void 0!==u&&u,p=$('<div class="editor-dialog"><h3>'+o+"</h3><p>"+n+"</p></div>"),f=$("body").css("overflow"),h=c(p,function(){},s,d);return $("body").css("overflow","hidden"),i.forEach(function(t){var e=$('<button class="clickable">'+t.text+"</button>");p.append(e),e.on("tap",function(){if("function"==typeof t.action)t.action(t.action);else{switch(t.action){case"close":$("body").css("overflow",f),h.remove();break;case"login":(0,l.jumptoLogin)()}r&&r(t.action)}})}),p}function a(t,e){function o(){f||(f=!0,p&&(p=!1,window.history.go(-1)),d(),l.remove(),e&&e())}function r(){p=!1,o(),window.removeEventListener("popstate",r)}var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=void 0;if("string"==typeof t?u=$("#"+t).clone():t.append&&(u=t),!u.length)return void i("未找到弹窗");u.addClass("editor-bottom-window-content");var l=$('<div class="editor-bottom-window-wrap">\n        <div class="editor-bottom-shadow"></div>\n        <div class="editor-bottom-layer"></div>            \n    </div>');$(document.body).append(l),l.find(".editor-bottom-layer").css("max-width",$("#wrap").width()-80+"px"),l.find(".editor-bottom-layer").append(u),u.css({display:"block"}),l.active(),l.find(".editor-bottom-layer").active();var d=n(l),p=!1,f=!1;return c&&(window.addEventListener("popstate",r),window.history.pushState(null,null,"#bottom-window"),p=!0),setTimeout(function(){function t(t){s&&o(),t.preventDefault()}l.find(".editor-bottom-shadow").on("touchstart",t).on("click",t),l.on("tap",function(t){a&&o()})},500),{$wrap:l,exit:o}}function s(t){function e(){w||(w=!0,y(),$.contains(document.body,f[0])&&f.replaceWith(o),v.remove(),g&&g(),o.removeClass(h),r&&r())}var o=t.$dom,r=t.onClose,a=t.closeOnTapWrap,s=void 0===a||a,c=t.closeOnTapShadow,u=void 0===c||c,l=t.gap,p=void 0===l?80:l,f=$("<div></div>"),h="editor-floating-layer-content";if($.contains(document.body,o[0])&&o.replaceWith(f),!o.length)return void i("未找到浮层");o.addClass(h);var v=$('<div class="editor-floating-layer-wrap">\n        <div class="editor-floating-shadow"></div>\n        <div class="editor-floating-layer"></div>            \n    </div>');$(document.body).append(v);var m=d.ua.pc?320:$("#wrap").width()-p;v.find(".editor-floating-layer").css("max-width",m+"px"),v.find(".editor-floating-layer").append(o);var g=void 0;o.isShown()||(o.hasClass("hide")&&(o.removeClass("hide"),g=function(){o.hide()}),"none"===o.css("display")&&(o.css("display","block"),g=function(){o.css("display","none")})),setTimeout(function(){v.active(),v.find(".editor-floating-layer").active()},200);var y=n(v),w=!1;return setTimeout(function(){function t(t){u&&e(),t.preventDefault()}v.find(".editor-floating-shadow").on("touchstart",t).on("click",t),v.on("tap",function(t){s&&(t.preventDefault(),e())})},500),{$wrap:v,exit:e}}function c(t,e){function o(){$("body").css("overflow",c),s.remove(),e&&e()}var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];(0,l.developerWarn)("showFloatingLayer is deprecated, use showFloatingLayer2 instead");var a=void 0;if("string"==typeof t?a=$("#"+t).clone():t.append&&(a=t),!a.length)return void i("未找到浮层");a.addClass("editor-floating-layer-content");var s=$('<div class="editor-floating-layer-wrap">\n        <div class="editor-floating-shadow"></div>\n        <div class="editor-floating-layer"></div>            \n    </div>');$(document.body).append(s),s.find(".editor-floating-layer").css("max-width",$("#wrap").width()-80+"px"),s.find(".editor-floating-layer").append(a),a.css({display:"block"}),setTimeout(function(){s.active(),s.find(".editor-floating-layer").active()},200);var c=$("body").css("overflow");return $("body").css("overflow","hidden"),setTimeout(function(){function t(t){r&&o(),t.preventDefault()}s.find(".editor-floating-shadow").on("touchstart",t).on("click",t),s.on("tap",function(t){n&&o()})},500),s}function u(t,e){function o(t){s.find(".tip").text("为保障您的账户安全，请先进行短信验证，验证手机号为您小米账号绑定的手机："+t)}function n(){$("body").css("overflow",u)}function i(){c(".error").css("visibility","hidden")}function r(t){c(".error").text(t).css("visibility","visible")}function a(t,e){$.ajax({type:"POST",url:location.origin+"/app/shop/captcha",data:t,dataType:"json",timeout:1e4,success:function(t){var o=t.code;if(0===o)e&&e(t.data);else if(4000001===o){var n="https://account.xiaomi.com/pass/auth/security/home";d.args.source&&(n+="?source="+d.args.source),window.location.href=n}else 4000002===o?r("请输入验证码"):4000003===o&&r("验证失败，请重新输入验证码")},error:function(t){e&&e(),0===t.status?r("网络连接超时, 请重试"):401===t.status?(0,l.jumptoLogin)():r("网络错误"+t.status+", 请重试")}})}var s=$('<div class="editor-captcha-wrap">\n            <div class="captcha-shadow"></div>                \n            <div class="bindPhone-dialog editor-sync-max-width">     \n                <header>验证手机</header>\n                <section class="split"></section>\n                <section class="tip"></section>\n                <section class="input">                \n                    <button data-state="to-get" class="fetch to-get clickable" id="CaptchaUrl">点击发送</button><div class="input-wrap"><input placeholder="请输入短信验证码" type="string"/></div>                \n                </section>\n                <section class="error" style="visibility: hidden;"> \n                    验证码不正确，请重新输入\n                </section>\n                <section class="submit">  \n                    <button class="clickable">确定</button>\n                </section>\n            </div>\n        </div>'),c=void 0;o(e.tel);var u=$("body").css("overflow");if($("body").css("overflow","hidden"),$(document.body).find(".editor-captcha-wrap").length)s=$(document.body).find(".editor-captcha-wrap"),c=s.find.bind(s),s.show();else{c=s.find.bind(s),$(document.body).append(s);var p=c(".fetch");c(".clickable,input").on("tap",function(){i()}),d.ua.android&&(c("input").on("focus",function(){c(".bindPhone-dialog").addClass("top")}),c("input").on("blur",function(){c(".bindPhone-dialog").removeClass("top")})),p.on("tap",function(t){"to-get"!==!c(".fetch").data("state")&&(p.data("state","getting"),p.inactive(),a({method:"Send",level:e.level,model:"PhoneCaptcha",transaction:e.transaction},function(t){if(t){var e=function(){p.text(--n+"s重发"),n||(p.active(),p.data("state","to-get").text("重新获取"),clearInterval(i))};if("digital"===t.keyboard&&c("input").attr("type","number"),"timing"===p.data("state"))return;o(t.tel),p.data("state","timing");var n=t.ttl+1;e();var i=setInterval(e,1e3)}else p.active(),p.data("state","to-get")}))}),c(".submit").on("tap",function(o){var i=c("input").val();if(!i)return void r("请输入验证码");a({method:"Verify",level:e.level,model:"PhoneCaptcha",ticket:i,transaction:e.transaction},function(e){e&&(n(),s.remove(),t&&t())})}),c(".captcha-shadow").on("tap",function(t){n(),s.remove()})}}Object.defineProperty(e,"__esModule",{value:!0}),e.toast=i,e.showDialog=r,e.showBottomWindow=a,e.showFloatingLayer2=s,e.showFloatingLayer=c,e.captcha=u;var l=o(2),d=o(0)},function(t,e,o){"use strict";o(5),o(12),o(13)},function(t,e,o){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e}var i=o(0),r=n(i),a=o(2),s=n(a),c=o(3),u=n(c),l=o(1),d=n(l);o(6),o(7),function(){var t={};Object.assign(t,r),Object.assign(t,s),Object.assign(t,u),Object.assign(t,d);for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(window[e]=t[e]);window.miHomeLib=t}()},function(module,exports,__webpack_require__){"use strict";function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function debugCheck(){function t(){i++}function e(){var t=document.createElement("script");t.type="text/javascript",t.src="/app/shop/pages/editor-static/js/general-debug.min.js",$(document.body).append(t)}function o(){if(n=!0,"test.home.mi.com"===location.host)return void e();(0,_tool.inWhite)(function(t){t&&e()})}var n=!1,i=0;"true"===(0,_base.localStorageGet)("enable-log-recorder")&&(networkRecorder.start(),logRecorder.start()),window.triggerGeneralDebug=o;var r=setInterval(function(){if(n)return void clearInterval(r);i>7?(n=!0,o(),clearInterval(r)):i=0},2e3);$(window).on("tap",t)}var _get=function t(e,o,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,o);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,o,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},_createClass=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),_env=__webpack_require__(0),_tool=__webpack_require__(2),_base=__webpack_require__(1);if(_env.isEditor?$("body").addClass("in-editor"):$("body").removeClass("in-editor"),setTimeout(_tool.removeAd),setTimeout(_tool.removeAd,2e3),setTimeout(_tool.removeAd,1e4),$("[data-name='video'] video").on("click",function(){this.paused?this.play():this.pause()}),$("a").on("tap",function(){var t=$(this).attr("href")||$(this).data("href");if(t)return $.ajax({type:"get",url:"http://home.mi.com/app/shop/stat?page=topic&href="+escape(t)+"&t="+Math.floor(Date.now()/1e3),dataType:"jsonp"}),!0}),_env.args.source){var $img=$("#editor-counter-img");$img.length&&$img.attr("src",$img.data("src")+"&source="+_env.args.source)}_env.args.insupport&&(0,_tool.inWhite)().then(function(result){if(result)try{window.addEventListener("message",function(e){if(e.origin.match("https?://support.io.mi.srv")){var msg=e.data;switch(msg.action){case"eval":eval(msg.data)}}}),window.parent.postMessage({action:"ready"},"*")}catch(t){}});var Recorder=function(){function t(){_classCallCheck(this,t),this.queue=[],this.queue.previousPush=this.queue.push,this.queue.push=function(t){this.previousPush(t),this.length>20&&this.shift()}}return _createClass(t,[{key:"start",value:function(){}},{key:"stop",value:function(){}},{key:"clear",value:function(){this.queue.length=0}}]),t}(),NetWorkRecorder=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"start",value:function(){_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"start",this).call(this),this._xhrSource=XMLHttpRequest;var t=this;this._previousOpen||(this._previousOpen=this._xhrSource.prototype.open,this._previousSetRequestHeader=this._xhrSource.prototype.setRequestHeader),this._xhrSource.prototype.open=function(){var e={url:null,status:null,statusText:null,method:null,responseType:null,responseHeaders:null,requestHeaders:[],readyState:0};return this.debugData=e,t.queue.push(e),e.method=arguments[0],e.url=arguments[1],this.addEventListener("readystatechange",function(){var t=this;e.readyState=t.readyState,4===e.readyState&&(e.responseType=t.responseType,e.status=t.status,e.statusText=t.statusText,e.responseText=t.responseText,t.getAllResponseHeaders&&(e.responseHeaders=t.getAllResponseHeaders()))}),t._previousOpen.apply(this,arguments)},this._xhrSource.prototype.setRequestHeader=function(){var e=this.debugData,o={name:arguments[0],value:arguments[1]};return e.requestHeaders.push(o),t._previousSetRequestHeader.apply(this,arguments)},this.hooked=!0}},{key:"stop",value:function(){if(_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stop",this).call(this),this.hooked){var t=this._xhrSource;t.prototype.open=this._previousOpen,t.prototype.setRequestHeader=this._previousSetRequestHeader,this.hooked=!1,this.sendStateToDashboard()}}}]),e}(Recorder),networkRecorder=new NetWorkRecorder;window.networkRecordList=networkRecorder.queue;var ConsoleRecorder=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"start",value:function(){_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"start",this).call(this);var t=this;this.funcs||(this.funcs=["log","warn","error"]),t.preFuncs={},this.funcs.forEach(function(e,o){t.preFuncs[e]=console[e],console[e]=function(){t.queue.push({type:e,content:1===arguments.length?arguments[0]:arguments}),t.preFuncs[e].apply(console,arguments)}})}},{key:"stop",value:function(){}}]),e}(Recorder),logRecorder=new ConsoleRecorder;window.logRecordList=logRecorder.queue,debugCheck(),_env.ua.app||_env.isEditor||(0,_tool.addAd)(),function(){function t(){var t=_env.$ragsContainer.width(),e=t/360;o.html("\n        [data-editor-tag-name]{\n            zoom:"+e+";\n        }\n        ")}var e=$(document.body);_env.ua.android&&e.addClass("editor-platform-android"),_env.ua.iOS&&e.addClass("editor-platform-iOS"),_env.ua.pc&&e.addClass("editor-platform-pc");var o=$("#adjust-tag-style");t(),$(window).on("resize",t)}()},function(t,e,o){"use strict";(function(e){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(n){function i(){}function r(t,e){return function(){t.apply(e,arguments)}}function a(t){if("object"!==o(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],p(t,this)}function s(t,e){for(;3===t._state;)t=t._value;if(0===t._state)return void t._deferreds.push(e);t._handled=!0,a._immediateFn(function(){var o=1===t._state?e.onFulfilled:e.onRejected;if(null===o)return void(1===t._state?c:u)(e.promise,t._value);var n=void 0;try{n=o(t._value)}catch(t){return void u(e.promise,t)}c(e.promise,n)})}function c(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===(void 0===e?"undefined":o(e))||"function"==typeof e)){var n=e.then;if(e instanceof a)return t._state=3,t._value=e,void l(t);if("function"==typeof n)return void p(r(n,e),t)}t._state=1,t._value=e,l(t)}catch(e){u(t,e)}}function u(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&a._immediateFn(function(){t._handled||a._unhandledRejectionFn(t._value)});for(var e=0,o=t._deferreds.length;e<o;e++)s(t,t._deferreds[e]);t._deferreds=null}function d(t,e,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=o}function p(t,e){var o=!1;try{t(function(t){o||(o=!0,c(e,t))},function(t){o||(o=!0,u(e,t))})}catch(t){if(o)return;o=!0,u(e,t)}}Date.prototype.format=function(t){var e=["","0","00","000","0000"],o={"Y+":this.getFullYear(),"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S+":this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(""+this.getFullYear()).substr(4-RegExp.$1.length)));for(var n in o)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?o[n]:(e[RegExp.$1.length]+o[n]).substr((""+o[n]).length)));return t},a.prototype.catch=function(t){return this.then(null,t)},a.prototype.then=function(t,e){var o=new this.constructor(i);return s(this,new d(t,e,o)),o},a.all=function(t){var e=Array.prototype.slice.call(t);return new a(function(t,n){function i(a,s){try{if(s&&("object"===(void 0===s?"undefined":o(s))||"function"==typeof s)){var c=s.then;if("function"==typeof c)return void c.call(s,function(t){i(a,t)},n)}e[a]=s,0==--r&&t(e)}catch(t){n(t)}}if(0===e.length)return t([]);for(var r=e.length,a=0;a<e.length;a++)i(a,e[a])})},a.resolve=function(t){return t&&"object"===(void 0===t?"undefined":o(t))&&t.constructor===a?t:new a(function(e){e(t)})},a.reject=function(t){return new a(function(e,o){o(t)})},a.race=function(t){return new a(function(e,o){for(var n=0,i=t.length;n<i;n++)t[n].then(e,o)})},a._immediateFn="function"==typeof e&&function(t){e(t)}||function(t){setTimeout(t,0)},a._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},a._setImmediateFn=function(t){a._immediateFn=t},a._setUnhandledRejectionFn=function(t){a._unhandledRejectionFn=t},void 0!==t&&t.exports?t.exports=a:n.Promise||(n.Promise=a)}(window)}).call(e,o(8).setImmediate)},function(t,e,o){function n(t,e){this._id=t,this._clearFn=e}var i=Function.prototype.apply;e.setTimeout=function(){return new n(i.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new n(i.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},o(9),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,o){(function(t,e){!function(t,o){"use strict";function n(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),o=0;o<e.length;o++)e[o]=arguments[o+1];var n={callback:t,args:e};return u[c]=n,s(c),c++}function i(t){delete u[t]}function r(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(o,n)}}function a(t){if(l)setTimeout(a,0,t);else{var e=u[t];if(e){l=!0;try{r(e)}finally{i(t),l=!1}}}}if(!t.setImmediate){var s,c=1,u={},l=!1,d=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?function(){s=function(t){e.nextTick(function(){a(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,o=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=o,e}}()?function(){var e="setImmediate$"+Math.random()+"$",o=function(o){o.source===t&&"string"==typeof o.data&&0===o.data.indexOf(e)&&a(+o.data.slice(e.length))};t.addEventListener?t.addEventListener("message",o,!1):t.attachEvent("onmessage",o),s=function(o){t.postMessage(e+o,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){a(t.data)},s=function(e){t.port2.postMessage(e)}}():d&&"onreadystatechange"in d.createElement("script")?function(){var t=d.documentElement;s=function(e){var o=d.createElement("script");o.onreadystatechange=function(){a(e),o.onreadystatechange=null,t.removeChild(o),o=null},t.appendChild(o)}}():function(){s=function(t){setTimeout(a,0,t)}}(),p.setImmediate=n,p.clearImmediate=i}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,o(10),o(11))},function(t,e){var o;o=function(){return this}();try{o=o||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(o=window)}t.exports=o},function(t,e){function o(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===o||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function r(t){if(d===clearTimeout)return clearTimeout(t);if((d===n||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(t);try{return d(t)}catch(e){try{return d.call(null,t)}catch(e){return d.call(this,t)}}}function a(){v&&f&&(v=!1,f.length?h=f.concat(h):m=-1,h.length&&s())}function s(){if(!v){var t=i(a);v=!0;for(var e=h.length;e;){for(f=h,h=[];++m<e;)f&&f[m].run();m=-1,e=h.length}f=null,v=!1,r(t)}}function c(t,e){this.fun=t,this.array=e}function u(){}var l,d,p=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:o}catch(t){l=o}try{d="function"==typeof clearTimeout?clearTimeout:n}catch(t){d=n}}();var f,h=[],v=!1,m=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)e[o-1]=arguments[o];h.push(new c(t,e)),1!==h.length||v||i(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.prependListener=u,p.prependOnceListener=u,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(module,exports,__webpack_require__){"use strict";function anim(t,e,o,n,i){"function"!=typeof e||i||(i=e,e=void 0);var r={opacity:o};return n&&(r.scale=n,t.css($.fx.cssPrefix+"transform-origin","0 0")),t.animate(r,e,null,i)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};if(function(t){function e(t,e,o,n){return Math.abs(t-e)<Math.abs(o-n)?o-n>0?"Up":"Down":t-e>0?"Left":"Right"}function o(){d=null,f.last&&(f.el.trigger("longTap"),f={})}function n(){d&&clearTimeout(d),d=null}function i(){c&&clearTimeout(c),u&&clearTimeout(u),l&&clearTimeout(l),d&&clearTimeout(d),c=u=l=d=null,f={}}function r(t){return("touch"==t.pointerType||t.pointerType==t.MSPOINTER_TYPE_TOUCH)&&t.isPrimary}function a(t,e){return t.type=="pointer"+e||t.type.toLowerCase()=="mspointer"+e}var s;s=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"};var c,u,l,d,p,f={};t(document).ready(function(){var h,v,m,g,y=0,w=0;"MSGesture"in window&&(p=new MSGesture,p.target=document.body),t(document).bind("MSGestureEnd",function(t){var e=t.velocityX>1?"Right":t.velocityX<-1?"Left":t.velocityY>1?"Down":t.velocityY<-1?"Up":null;e&&(f.el.trigger("swipe"),f.el.trigger("swipe"+e))}).on(s.start,function(e){(!(g=a(e,"down"))||r(e))&&(m=g?e:e.touches[0],e.touches&&1===e.touches.length&&f.x2&&(f.x2=void 0,f.y2=void 0),h=Date.now(),v=h-(f.last||h),f.el=t("tagName"in m.target?m.target:m.target.parentNode),c&&clearTimeout(c),f.x1=m.pageX,f.y1=m.pageY,v>0&&250>=v&&(f.isDoubleTap=!0),f.last=h,d=setTimeout(o,750),p&&g&&p.addPointer(e.pointerId))}).on(s.move,function(t){(!(g=a(t,"move"))||r(t))&&(m=g?t:t.touches[0],n(),f.x2=m.pageX,f.y2=m.pageY,y+=Math.abs(f.x1-f.x2),w+=Math.abs(f.y1-f.y2))}).on(s.end,function(o){return(g=a(o,"up"))&&!r(o)?n():(f.x2&&Math.abs(f.x1-f.x2)>30||f.y2&&Math.abs(f.y1-f.y2)>30?l=setTimeout(function(){f.el&&(f.el.trigger("swipe"),f.el.trigger("swipe"+e(f.x1,f.x2,f.y1,f.y2))),f={}},0):"last"in f&&(30>y&&30>w?u=setTimeout(function(){var e=t.Event("tap");e.cancelTouch=i,f.el&&f.el.trigger(e),f.isDoubleTap?(f.el&&f.el.trigger("doubleTap"),f={}):c=setTimeout(function(){c=null,f.el&&f.el.trigger("singleTap"),f={}},250)},0):f={}),void(y=w=0))}).on(s.cancel,i),t(window).on("scroll",i)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){t.fn[e]=function(t){return this.on(e,t)}})}(Zepto),function(t,e){function o(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function n(t){return i?i+t:t.toLowerCase()}var i,r,a,s,c,u,l,d,p,f,h="",v={Webkit:"webkit",Moz:"",O:"o"},m=document.createElement("div"),g=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,y={};m.style.transform===e&&t.each(v,function(t,o){return m.style[t+"TransitionProperty"]!==e?(h="-"+t.toLowerCase()+"-",i=o,!1):e}),r=h+"transform",y[a=h+"transition-property"]=y[s=h+"transition-duration"]=y[u=h+"transition-delay"]=y[c=h+"transition-timing-function"]=y[l=h+"animation-name"]=y[d=h+"animation-duration"]=y[f=h+"animation-delay"]=y[p=h+"animation-timing-function"]="",t.fx={off:i===e&&m.style.transitionProperty===e,speeds:{_default:400,fast:200,slow:600},cssPrefix:h,transitionEnd:n("TransitionEnd"),animationEnd:n("AnimationEnd")},t.fn.animate=function(o,n,i,r,a){return t.isFunction(n)&&(r=n,i=e,n=e),t.isFunction(i)&&(r=i,i=e),t.isPlainObject(n)&&(i=n.easing,r=n.complete,a=n.delay,n=n.duration),n&&(n=("number"==typeof n?n:t.fx.speeds[n]||t.fx.speeds._default)/1e3),a&&(a=parseFloat(a)/1e3),this.anim(o,n,i,r,a)},t.fn.anim=function(n,i,h,v,m){var w,_,b,T={},$="",x=this,P=t.fx.transitionEnd,O=!1;if(i===e&&(i=t.fx.speeds._default/1e3),m===e&&(m=0),t.fx.off&&(i=0),"string"==typeof n)T[l]=n,T[d]=i+"s",T[f]=m+"s",T[p]=h||"linear",P=t.fx.animationEnd;else{_=[];for(w in n)g.test(w)?$+=w+"("+n[w]+") ":(T[w]=n[w],_.push(o(w)));$&&(T[r]=$,_.push(r)),i>0&&"object"==(void 0===n?"undefined":_typeof(n))&&(T[a]=_.join(", "),T[s]=i+"s",T[u]=m+"s",T[c]=h||"linear")}return b=function(o){if(e!==o){if(o.target!==o.currentTarget)return;t(o.target).unbind(P,b)}else t(this).unbind(P,b);O=!0,t(this).css(y),v&&v.call(this)},i>0&&(this.bind(P,b),setTimeout(function(){O||b.call(x)},1e3*(i+m)+25)),this.size()&&this.get(0).clientLeft,this.css(T),i>0||setTimeout(function(){x.each(function(){b.call(this)})},0),this},m=null}(Zepto),!ua.android&&!ua.iOS){var on=$.fn.on,off=$.fn.off;$.fn.on=function(t){var e=arguments;return("tap"==t||"function"==typeof e[2]&&"tap"==e[1])&&(e[0]="click"),on.apply(this,e)},$.fn.off=function(t){var e=arguments;return"tap"==t&&(e[0]="click"),off.apply(this,e)}}$.fn.goTo=function(){var t=$(this).offset().top;return $(window).scrollTop(t),this},$.fn.hide=function(){return this.addClass("hide"),this};var zeptoShow=$.fn.show;$.fn.show=function(){return zeptoShow.call(this),this.removeClass("hide"),this},$.fn.isShown=function(){return!this.hasClass("hide")&&"none"!==this.css("display")},$.fn.toggleShow=function(){this.hasClass("hide")?this.removeClass("hide"):this.addClass("hide")},$.fn.active=function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.addClass("active"),this},$.fn.inactive=function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.removeClass("active"),this},$.fn.isActive=function(){return this.hasClass("active")},$.fn.fadeTo=function(t,e,o){return anim(this,t,e,null,o)},$.fn.fadeIn=function(t,e){var o=this.css("opacity");return o>0?this.css("opacity",0):o=1,this.fadeTo(t,o,e)},$.fn.fadeOut=function(t,e){var o=this.css("opacity");return o<1?this.css("opacity",1):o=0,this.fadeTo(t,o,e)},$.fn.fadeToggle=function(t,e){return this.each(function(){var o=$(this);o[0==o.css("opacity")||"none"==o.css("display")?"fadeIn":"fadeOut"](t,e)})},$.fn.uaShow=function(){var $dom=this,value=$dom.data("editor-platform"),iOS=ua.iOS,android=ua.android,app=ua.app,pc=ua.pc,weixin=ua.weixin,wechat=ua.wechat;if(!value.match(/^[\w|&\(\)\!]*$/))return void console.warn("illegal platform class: ",value);var show=void 0;try{eval("show="+value)}catch(t){console.log(t)}show?($dom.addClass("show"),$dom.removeClass("hide")):($dom.addClass("hide"),$dom.removeClass("show"))},$("[data-editor-platform]").each(function(){$(this).uaShow()})},function(t,e){}]);